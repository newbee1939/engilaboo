・RSC(React Server Components)って最近よく聞くけど、どんなものなのか分かっていない。。
・RSC と App Router ってどういう関係なんだろう？
・そろそろキャッチアップしとかないとマズイよな。。

今回はこういった声にお答えします。
なるべく丁寧に解説するので、少しでも参考になれば幸いです。

※全ての資料を読んで完璧にする
※ChatGPT で誤字脱字の修正
※ブログと Qiita に同じ内容投稿すればいいやん（ちょっと変えてもいいし）

## React Server Components と App Router を今度こそちゃんと理解する

いきなり RSC の深いところから話しても難しいと思うので、順を追って説明していきます。

まずは React と Next.js についてです。

### React と Next.js について

React とは、UI を簡単に構築するための JavaScript ライブラリです。

「コンポーネント」という概念を使って宣言的に UI を定義することで、簡単に画面の構築を行うことができます。

そして、Next.js とは React のフレームワークです。

React の機能をさらに拡張してより使いやすくしたものと捉えて良いでしょう。

### React のレンダリング方式について

React は、Create React App で作成された状態では、CSR（クライアントサイドレンダリング）でレンダリングをします。

CSR とは、ブラウザ上で JavaScript を実行して DOM を生成しコンテンツを表示させる方法です。

ページの初期ロード時にはコンテンツは何も表示されず（白い画面）、ブラウザでの JavaScript の実行後に画面が表示されます。

React でのレンダリングは、以下のステップで行われます。

参考: https://react.dev/learn/render-and-commit#epilogue-browser-paint

1. Triggering a render

レンダリングのきっかけとなるトリガーを検知します。

ここでのトリガーとは、以下の二つです。

- コンポーネントの初期レンダリング
- コンポーネントの状態（state）の更新

このいずれかのトリガーを検知したとき、React はレンダリングを開始します。

2. Rendering the component

次に、実際にレンダリングを行います。

React における「レンダリング」は主に以下の３つを行います。

- 1. 対象のコンポーネントの呼び出し
- 2. 以前のコンポーネントの状態との比較
- 3. コミット（ブラウザレンダリング）する内容の決定

1 の対象のコンポーネントについて、最初のレンダリングでは、ルートコンポーネントを呼び出し、それ以降のレンダリングでは、状態更新がレンダリングのトリガーとなった関数コンポーネントを呼び出します。

そして 2 で以前のコンポーネントの状態との差分を計算し、（そもそも画面を更新するか否かも含めて）画面更新の内容を決定します。

そして、差分が検知されて画面を更新する必要がある場合、次の手順 3 を実行します。

つまり、React のレンダリングとは、「レンダリング対象のコンポーネントを呼び出して前回の内容との差分を比較し、何をブラウザレンダリング（Commit）をするかを決定すること」と言えるでしょう。

同じ「レンダリング」という名前が付いているので混同しがちですが、「ブラウザレンダリング（画面への描画）」とは違う概念なのでしっかりと区別するようにしましょう。

順番としては、「React のレンダリング」をした後に「ブラウザのレンダリング」を行なっているイメージです。

3. Committing to the DOM

React は 2 で以前の状態との差分があった場合、その差分をコミット（変更を DOM に適用）します。

つまり、DOM ツリーの構造の修正を行います。

この 3 つの流れについて、React の公式ではレストランを例にして解説されています。

とても分かりやすいのでぜひこちらも読んでみてください。

https://react.dev/learn/render-and-commit#epilogue-browser-paint

そして、React によるこの 3 つの処理が行われた後、ブラウザはその変更を画面に適用します。（ブラウザレンダリング）

コメント: 公式では React のレンダリングとブラウザレンダリングを区別するためにブラウザレンダリングは「ペイント」と呼ばれています

以上の流れにより、画面の表示や更新が行われます。

### Next.js のレンダリング方式について

本の内容も参考に

- SSR
- CSR
- ISR
- SSG

### ハイドレーションとは

7 歳娘「パパ、React の Hydration Error ってなんで起こるの？」
https://qiita.com/Yametaro/items/22cde58cd6abf577f1a4

### RSC とは何か？

### App Router とは何か？

### SSR と App Router(RSC)の違いについて

SSR（サーバーサイドでのレンダリング＋ハイドレーション）

RSC （サーバーサイドでのレンダリングのみ？）

SSG は？サーバーサイドでのレンダリングのみではなく？

### SSR ト App Router(RSC)をどう使い分ける？

### App Router(RSC)のサンプル実装

### まとめ

### 参考資料
